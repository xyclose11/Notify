@using Microsoft.AspNetCore.Identity
@model NoteApp.Models.ViewModels.Notes.NoteIndexViewModel
@inject UserManager<User> UserManager

<h1>Notes</h1>
@if (Model.Roles.Contains("Admin"))
{
        
        <div class="row badge bg-black">
                <a class="text-md-center text-white text-decoration-none" href="@Url.Action("CreateTestNotes")">Create Test Notes</a>
        </div>
}

<div class="container-fluid">
        <div class="row badge bg-black">
                <a class="text-white text-decoration-none text-md-center" href="@Url.Action("Create")">New Note +</a>
        </div>
</div>

<select id="viewSelector">
        <option value="Card">Card View</option>
        <option value="Table">Table View</option>
</select>

<div class="container text-center" id="notesSection">

</div>


<script>
        $(document).ready(function() {
                $('.delete-note').on('click', function() {
                        const noteId = $(this).data('note-id');
                        $.ajax({
                                url: '/Note/Delete/' + noteId,
                                type: 'POST',
                                headers: {
                                        'RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val()
                                },
                                success: function(result) {
                                        if (result.success) {
                                                // Remove the note from the DOM
                                                $(this).closest('.card').remove();
                                        } else {
                                                // Handle error
                                                alert('Error deleting note.');
                                        }
                                }
                                
                        });
                });
        });
</script>
<script src="~/js/bundle.js"></script>

